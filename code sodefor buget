ğŸ“¦ Installation des dÃ©pendances
bash
Copier
Modifier
pip install pandas openai streamlit python-dotenv
ğŸ“ Structure du projet
bash
Copier
Modifier
budget_chatbot/
â”‚
â”œâ”€â”€ app.py              â† Interface Streamlit
â”œâ”€â”€ advisor.py          â† Analyse & conseils budgÃ©taires
â”œâ”€â”€ chat.py             â† Moteur de chatbot (OpenAI ou rÃ¨gles)
â”œâ”€â”€ .env                â† ClÃ© API OpenAI
ğŸ“„ Exemple de fichier CSV ou Excel
compte_id	date	catÃ©gorie	montant	type	budget_mensuel
1001	2025-07-01	Alimentation	120.50	dÃ©bit	300
1001	2025-07-03	Transport	80.00	dÃ©bit	150
1001	2025-07-10	Salaire	2500.00	crÃ©dit	
1002	2025-07-05	Shopping	200.00	dÃ©bit	400

ğŸ” .env
env
Copier
Modifier
OPENAI_API_KEY=sk-...
ğŸ§  chat.py â€“ Moteur NLP
python
Copier
Modifier
import openai
import os
from dotenv import load_dotenv

load_dotenv()
openai.api_key = os.getenv("OPENAI_API_KEY")

def get_budget_advice(user_prompt, context_summary):
    messages = [
        {"role": "system", "content": "Tu es un assistant financier intelligent. Tu aides Ã  analyser les dÃ©penses par rapport au budget et Ã  proposer des conseils budgÃ©taires adaptÃ©s."},
        {"role": "user", "content": f"Voici les donnÃ©es : {context_summary}"},
        {"role": "user", "content": user_prompt}
    ]

    response = openai.ChatCompletion.create(
        model="gpt-4",
        messages=messages,
        temperature=0.4,
        max_tokens=500
    )
    return response['choices'][0]['message']['content']
ğŸ“Š advisor.py â€“ Analyse des comptes
python
Copier
Modifier
import pandas as pd

def load_data(file):
    if file.name.endswith('.csv'):
        df = pd.read_csv(file)
    else:
        df = pd.read_excel(file)
    df['date'] = pd.to_datetime(df['date'])
    return df

def summarize_account(df, account_id):
    df_account = df[df['compte_id'] == account_id]
    if df_account.empty:
        return f"Aucune donnÃ©e trouvÃ©e pour le compte {account_id}", None

    summary = {}
    categories = df_account['catÃ©gorie'].unique()
    for cat in categories:
        cat_df = df_account[df_account['catÃ©gorie'] == cat]
        spent = cat_df[cat_df['type'] == 'dÃ©bit']['montant'].sum()
        budget = cat_df['budget_mensuel'].dropna().unique()
        budget = budget[0] if len(budget) > 0 else None
        summary[cat] = {
            'dÃ©pensÃ©': round(spent, 2),
            'budget': budget,
            'Ã©cart': round((budget - spent), 2) if budget else None
        }
    return summary, df_account

def format_summary_for_ai(summary):
    lines = []
    for cat, data in summary.items():
        line = f"{cat} : dÃ©pensÃ© {data['dÃ©pensÃ©']} â‚¬, budget {data['budget']} â‚¬, Ã©cart {data['Ã©cart']} â‚¬"
        lines.append(line)
    return "\n".join(lines)
ğŸ’¬ app.py â€“ Interface utilisateur
python
Copier
Modifier
import streamlit as st
from advisor import load_data, summarize_account, format_summary_for_ai
from chat import get_budget_advice

st.set_page_config(page_title="Assistant Budgetaire IA", page_icon="ğŸ’¸")
st.title("ğŸ’¸ Chatbot Budgetaire Intelligent")

uploaded_file = st.file_uploader("ğŸ“‚ Charge ton fichier CSV ou Excel", type=["csv", "xlsx"])

if uploaded_file:
    df = load_data(uploaded_file)
    compte_ids = df['compte_id'].unique()
    selected_id = st.selectbox("ğŸ” Choisis un compte", compte_ids)

    summary, df_account = summarize_account(df, selected_id)

    if summary:
        st.subheader("ğŸ“Š RÃ©sumÃ© des dÃ©penses vs budget :")
        for cat, info in summary.items():
            st.write(f"- **{cat}** : DÃ©pensÃ© {info['dÃ©pensÃ©']} â‚¬, Budget {info['budget']} â‚¬, Ã‰cart {info['Ã©cart']} â‚¬")

        st.subheader("ğŸ¤– Pose une question sur ton budget :")
        user_question = st.text_input("Ex: Comment puis-je mieux gÃ©rer mes dÃ©penses ?")

        if user_question:
            ai_input = format_summary_for_ai(summary)
            response = get_budget_advice(user_question, ai_input)
            st.markdown("### ğŸ“Œ Conseils personnalisÃ©s :")
            st.markdown(response)
âœ… FonctionnalitÃ©s proposÃ©es
Lecture et analyse de fichiers .csv ou .xlsx

Suivi par catÃ©gorie : alimentation, transport, shopping, etc.

Comparaison dÃ©penses vs budget

Conseils gÃ©nÃ©rÃ©s par IA via GPT

Interface simple et interactive

ğŸ”œ Ã‰volutions possibles
Alertes automatiques si dÃ©passement de budget

Suivi multi-mois

Graphe des dÃ©penses avec plotly

Ajout de seuils personnalisables

Authentification utilisateur

Souhaites-tu que je tâ€™aide Ã  :

GÃ©nÃ©rer un exemple de fichier prÃªt Ã  lâ€™emploi ?

Ajouter des graphiques ?

DÃ©ployer sur le Web (ex : via Streamlit Cloud ou Render) ?

Je peux aussi tâ€™aider Ã  convertir cette app en assistant mobile (Flutter/React Native) si besoin.



Vous avez ditÂ :
GÃ©nÃ©rer un exemple de fichier prÃªt Ã  lâ€™emploi ?

Ajouter des graphiques ?

DÃ©ployer sur le Web (ex : via Streamlit Cloud ou Render) ?

 convertir cette app en assistant mobile (Flutter/React Native) si besoin.

ChatGPT a ditÂ :
Excellentes idÃ©esâ€¯! Voici un plan complet pour :

âœ… GÃ©nÃ©rer un fichier CSV/Excel prÃªt Ã  l'emploi

ğŸ“ˆ Ajouter des graphiques interactifs

ğŸŒ DÃ©ployer sur le Web

ğŸ“± Convertir l'app en assistant mobile

1. âœ… GÃ©nÃ©rer un fichier exemple (CSV et Excel)
Tu peux exÃ©cuter ce script pour crÃ©er un fichier transactions_exemple.csv et transactions_exemple.xlsx.

python
Copier
Modifier
import pandas as pd

data = {
    "compte_id": [1001]*6 + [1002]*4,
    "date": [
        "2025-07-01", "2025-07-03", "2025-07-10", "2025-07-12", "2025-07-15", "2025-07-18",
        "2025-07-02", "2025-07-06", "2025-07-11", "2025-07-14"
    ],
    "catÃ©gorie": [
        "Alimentation", "Transport", "Salaire", "Loisirs", "SantÃ©", "Alimentation",
        "Shopping", "Transport", "Logement", "SantÃ©"
    ],
    "montant": [
        120.5, 80.0, 2500.0, 150.0, 60.0, 90.0,
        200.0, 75.0, 600.0, 50.0
    ],
    "type": [
        "dÃ©bit", "dÃ©bit", "crÃ©dit", "dÃ©bit", "dÃ©bit", "dÃ©bit",
        "dÃ©bit", "dÃ©bit", "dÃ©bit", "dÃ©bit"
    ],
    "budget_mensuel": [
        300, 150, None, 200, 100, 300,
        400, 150, 800, 100
    ]
}

df = pd.DataFrame(data)
df['date'] = pd.to_datetime(df['date'])

df.to_csv("transactions_exemple.csv", index=False)
df.to_excel("transactions_exemple.xlsx", index=False)

print("âœ… Fichiers gÃ©nÃ©rÃ©s : transactions_exemple.csv & transactions_exemple.xlsx")
2. ğŸ“ˆ Ajouter des graphiques dans app.py (avec Plotly)
ğŸ”§ Installer Plotly
bash
Copier
Modifier
pip install plotly
â• Ajout dans app.py
python
Copier
Modifier
import plotly.express as px

# AprÃ¨s avoir chargÃ© les transactions :
if df_account is not None and not df_account.empty:
    df_visu = df_account[df_account['type'] == 'dÃ©bit']

    # DÃ©penses par catÃ©gorie
    fig = px.bar(df_visu, x='catÃ©gorie', y='montant', title="DÃ©penses par catÃ©gorie")
    st.plotly_chart(fig, use_container_width=True)

    # DÃ©penses dans le temps
    df_time = df_visu.groupby('date').sum(numeric_only=True).reset_index()
    fig2 = px.line(df_time, x='date', y='montant', title="Ã‰volution des dÃ©penses dans le temps")
    st.plotly_chart(fig2, use_container_width=True)
3. ğŸŒ DÃ©ployer sur le Web
ğŸŸ£ Option 1 â€“ Streamlit Cloud (le plus simple)
Ã‰tapes :
CrÃ©e un compte gratuit : https://streamlit.io/cloud

Pousse ton code sur un repo GitHub.

Clique sur "New App" sur Streamlit Cloud.

Lien : https://your-app-name.streamlit.app

âœ… Stocke la clÃ© API dans les secrets de Streamlit (.env â†’ Secrets Manager).

ğŸŸ  Option 2 â€“ Render.com (plus personnalisable)
CrÃ©e un compte sur https://render.com

Lien ton repo GitHub

Configuration :

Start command : streamlit run app.py

Python version dans runtime.txt: python-3.11

Variables dâ€™environnement : ajoute OPENAI_API_KEY

4. ğŸ“± Convertir lâ€™app en assistant mobile (Flutter ou React Native)
ğŸ§© Structure recommandÃ©e
A. Backend API (Python / FastAPI)
Extrait la logique Streamlit dans une API REST :

bash
Copier
Modifier
pip install fastapi uvicorn
Exemple main.py :
python
Copier
Modifier
from fastapi import FastAPI, UploadFile
from advisor import load_data, summarize_account, format_summary_for_ai
from chat import get_budget_advice

app = FastAPI()

@app.post("/analyze/")
async def analyze(file: UploadFile, account_id: int, question: str):
    df = load_data(await file.read())
    summary, _ = summarize_account(df, account_id)
    context = format_summary_for_ai(summary)
    response = get_budget_advice(question, context)
    return {"response": response}
Lance le serveur :

bash
Copier
Modifier
uvicorn main:app --reload
B. Frontend mobile
Option 1 â€“ React Native + Expo
App mobile qui upload le fichier CSV/Excel

Appelle /analyze/ via fetch()

Affiche la rÃ©ponse du chatbot

Option 2 â€“ Flutter
MÃªme logique : HTTP POST vers lâ€™API

Interface native + boutons + chat
